<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Granny‚Äôs Backpack - Granny Bean Adventure</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to bottom, #f4d03f, #f39c12); /* Cozy autumn gradient */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            color: #333;
        }
        #game-container {
            position: relative;
            width: 90vw;
            height: 90vh;
            max-width: 800px;
            max-height: 600px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            overflow: hidden;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        #title {
            font-size: 2em;
            color: #ff9900; /* Orange like Granny's cardigan */
            margin: 10px;
            font-style: italic; /* Like your logo */
        }
        #granny {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 5em;
            line-height: 1;
        }
        #backpack {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 250px;
            background: #8b4513; /* Brown backpack */
            border-radius: 20px 20px 0 0;
            border: 5px solid #a0522d;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3em;
            color: white;
        }
        .item {
            position: absolute;
            width: 120px;
            height: 150px;
            cursor: grab;
            touch-action: none;
            background: #fff;
            border: 2px solid #ddd;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 1em;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .item .image {
            font-size: 4em; /* Large image/emoji */
            margin-bottom: 5px;
        }
        .item .word {
            font-size: 0.8em; /* Small word */
        }
        #timer {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5em;
            color: #333;
        }
        #hint {
            position: absolute;
            bottom: 300px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.2em;
            color: #ff0000;
            display: none;
            background: rgba(255,255,255,0.8);
            padding: 10px;
            border-radius: 10px;
            max-width: 80%;
        }
        #progress {
            position: absolute;
            top: 50px;
            right: 10px;
            font-size: 1em;
            color: #333;
        }
        /* Animation for bounce */
        @keyframes bounce {
            0% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0); }
        }
        /* Media queries for responsiveness */
        @media (max-width: 600px) {
            .item {
                width: 100px;
                height: 120px;
            }
            .item .image {
                font-size: 3em;
            }
            #backpack {
                width: 150px;
                height: 200px;
                font-size: 2.5em;
            }
            #title {
                font-size: 1.5em;
            }
            #timer {
                font-size: 1.2em;
            }
            #hint {
                bottom: 220px;
                font-size: 1em;
            }
            #granny {
                font-size: 3em;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="title">Granny‚Äôs Backpack</div>
        <div id="granny">üë©‚Äçü¶±</div> <!-- Simple emoji for Granny Bean -->
        <div id="backpack" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div id="timer">Time: 60</div>
        <div id="hint"></div>
        <div id="progress">Packed: 0/3</div>
    </div>

    <script>
        const itemsData = {
            "A": {
                "correct": [{emoji: "üçé", word: "Apple"}, {emoji: "üêú", word: "Ant"}, {emoji: "‚úàÔ∏è", word: "Airplane"}],
                "wrong": [{emoji: "‚öΩ", word: "Ball"}, {emoji: "üê±", word: "Cat"}]
            },
            "B": {
                "correct": [{emoji: "‚öΩ", word: "Ball"}, {emoji: "üéà", word: "Balloon"}, {emoji: "ü¶á", word: "Bat"}],
                "wrong": [{emoji: "üçé", word: "Apple"}, {emoji: "üêú", word: "Ant"}]
            },
            "C": {
                "correct": [{emoji: "üç∞", word: "Cake"}, {emoji: "üïØÔ∏è", word: "Candle"}, {emoji: "üç¨", word: "Candy"}],
                "wrong": [{emoji: "‚öΩ", word: "Ball"}, {emoji: "üêª", word: "Bear"}]
            },
            "D": {
                "correct": [{emoji: "üê∂", word: "Dog"}, {emoji: "üö™", word: "Door"}, {emoji: "ü•Å", word: "Drum"}],
                "wrong": [{emoji: "üç∞", word: "Cake"}, {emoji: "üöó", word: "Car"}]
            },
            "E": {
                "correct": [{emoji: "ü•ö", word: "Egg"}, {emoji: "üêò", word: "Elephant"}, {emoji: "‚úâÔ∏è", word: "Envelope"}],
                "wrong": [{emoji: "üê∂", word: "Dog"}, {emoji: "üö™", word: "Door"}]
            },
            "F": {
                "correct": [{emoji: "üêü", word: "Fish"}, {emoji: "üå∏", word: "Flower"}, {emoji: "üèà", word: "Football"}],
                "wrong": [{emoji: "ü•ö", word: "Egg"}, {emoji: "üêò", word: "Elephant"}]
            },
            "G": {
                "correct": [{emoji: "üéÆ", word: "Game"}, {emoji: "üóëÔ∏è", word: "Garbage"}, {emoji: "üö™", word: "Gate"}],
                "wrong": [{emoji: "üêü", word: "Fish"}, {emoji: "üå∏", word: "Flower"}]
            },
            "H": {
                "correct": [{emoji: "üé©", word: "Hat"}, {emoji: "üè†", word: "House"}, {emoji: "‚ù§Ô∏è", word: "Heart"}],
                "wrong": [{emoji: "üéÆ", word: "Game"}, {emoji: "üóëÔ∏è", word: "Garbage"}]
            },
            "I": {
                "correct": [{emoji: "üç®", word: "Ice Cream"}, {emoji: "üßä", word: "Ice"}, {emoji: "üêõ", word: "Insect"}],
                "wrong": [{emoji: "üé©", word: "Hat"}, {emoji: "üè†", word: "House"}]
            },
            "J": {
                "correct": [{emoji: "üé≤", word: "Jacks"}, {emoji: "üéÉ", word: "Jack-o-lantern"}, {emoji: "üçì", word: "Jam"}],
                "wrong": [{emoji: "üç®", word: "Ice Cream"}, {emoji: "üßä", word: "Ice"}]
            },
            "K": {
                "correct": [{emoji: "ü¶ò", word: "Kangaroo"}, {emoji: "üçÖ", word: "Ketchup"}, {emoji: "üîë", word: "Key"}],
                "wrong": [{emoji: "üé≤", word: "Jacks"}, {emoji: "üéÉ", word: "Jack-o-lantern"}]
            },
            "L": {
                "correct": [{emoji: "ü¶Å", word: "Lion"}, {emoji: "üîí", word: "Lock"}, {emoji: "üçÉ", word: "Leaf"}],
                "wrong": [{emoji: "ü¶ò", word: "Kangaroo"}, {emoji: "üçÖ", word: "Ketchup"}]
            },
            "M": {
                "correct": [{emoji: "üêí", word: "Monkey"}, {emoji: "üåï", word: "Moon"}, {emoji: "üìß", word: "Mail"}],
                "wrong": [{emoji: "ü¶Å", word: "Lion"}, {emoji: "üîí", word: "Lock"}]
            },
            "N": {
                "correct": [{emoji: "ü™π", word: "Nest"}, {emoji: "üì∞", word: "Newspaper"}, {emoji: "üåô", word: "Night"}],
                "wrong": [{emoji: "üêí", word: "Monkey"}, {emoji: "üåï", word: "Moon"}]
            },
            "O": {
                "correct": [{emoji: "üêô", word: "Octopus"}, {emoji: "ü¶¶", word: "Otter"}, {emoji: "ü¶â", word: "Owl"}],
                "wrong": [{emoji: "ü™π", word: "Nest"}, {emoji: "üì∞", word: "Newspaper"}]
            },
            "P": {
                "correct": [{emoji: "‚úèÔ∏è", word: "Pencil"}, {emoji: "üçï", word: "Pizza"}, {emoji: "üéÉ", word: "Pumpkin"}],
                "wrong": [{emoji: "üêô", word: "Octopus"}, {emoji: "ü¶¶", word: "Otter"}]
            },
            "Q": {
                "correct": [{emoji: "üë∏", word: "Queen"}, {emoji: "‚ùì", word: "Question"}, {emoji: "ü™∂", word: "Quill"}],
                "wrong": [{emoji: "‚úèÔ∏è", word: "Pencil"}, {emoji: "üçï", word: "Pizza"}]
            },
            "R": {
                "correct": [{emoji: "üê∞", word: "Rabbit"}, {emoji: "üåà", word: "Rainbow"}, {emoji: "üåπ", word: "Rose"}],
                "wrong": [{emoji: "üë∏", word: "Queen"}, {emoji: "‚ùì", word: "Question"}]
            },
            "S": {
                "correct": [{emoji: "üêç", word: "Snake"}, {emoji: "‚≠ê", word: "Star"}, {emoji: "üçì", word: "Strawberry"}],
                "wrong": [{emoji: "üê∞", word: "Rabbit"}, {emoji: "üåà", word: "Rainbow"}]
            },
            "T": {
                "correct": [{emoji: "‚õ∫", word: "Tent"}, {emoji: "üå≥", word: "Tree"}, {emoji: "üöú", word: "Tractor"}],
                "wrong": [{emoji: "üêç", word: "Snake"}, {emoji: "‚≠ê", word: "Star"}]
            },
            "U": {
                "correct": [{emoji: "‚òÇÔ∏è", word: "Umbrella"}, {emoji: "ü¶Ñ", word: "Unicorn"}, {emoji: "üÜô", word: "Up"}],
                "wrong": [{emoji: "‚õ∫", word: "Tent"}, {emoji: "üå≥", word: "Tree"}]
            },
            "V": {
                "correct": [{emoji: "üöê", word: "Van"}, {emoji: "ü•ï", word: "Vegetable"}, {emoji: "üéª", word: "Violin"}],
                "wrong": [{emoji: "‚òÇÔ∏è", word: "Umbrella"}, {emoji: "ü¶Ñ", word: "Unicorn"}]
            },
            "W": {
                "correct": [{emoji: "üíß", word: "Water"}, {emoji: "üçâ", word: "Watermelon"}, {emoji: "‚åö", word: "Watch"}],
                "wrong": [{emoji: "üöê", word: "Van"}, {emoji: "ü•ï", word: "Vegetable"}]
            },
            "X": {
                "correct": [{emoji: "ü©ª", word: "X-ray"}, {emoji: "ü™á", word: "Xylophone"}, {emoji: "üñ®Ô∏è", word: "Xerox"}],
                "wrong": [{emoji: "üíß", word: "Water"}, {emoji: "üçâ", word: "Watermelon"}]
            },
            "Y": {
                "correct": [{emoji: "üß∂", word: "Yarn"}, {emoji: "üü°", word: "Yellow"}, {emoji: "ü™Ä", word: "Yo-yo"}],
                "wrong": [{emoji: "ü©ª", word: "X-ray"}, {emoji: "ü™á", word: "Xylophone"}]
            },
            "Z": {
                "correct": [{emoji: "ü¶ì", word: "Zebra"}, {emoji: "ü§ê", word: "Zipper"}, {emoji: "ü¶ù", word: "Zoo"}],
                "wrong": [{emoji: "üß∂", word: "Yarn"}, {emoji: "üü°", word: "Yellow"}]
            }
        };

        let currentLetterIndex = 0;
        const letters = Object.keys(itemsData);
        let targetLetter = letters[currentLetterIndex];
        let timeLeft = 60;
        let timerInterval;
        let score = 0;

        function playDing() {
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioCtx.createOscillator();
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(880, audioCtx.currentTime); // High ding
            oscillator.connect(audioCtx.destination);
            oscillator.start();
            setTimeout(() => oscillator.stop(), 200);
        }

        function playBoing() {
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioCtx.createOscillator();
            oscillator.type = 'sawtooth';
            oscillator.frequency.setValueAtTime(440, audioCtx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(110, audioCtx.currentTime + 0.5);
            oscillator.connect(audioCtx.destination);
            oscillator.start();
            setTimeout(() => oscillator.stop(), 500);
        }

        function startGame() {
            document.getElementById('title').innerText = `Pack for ${targetLetter}!`;
            document.getElementById('backpack').innerText = targetLetter;
            loadItems();
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').innerText = `Time: ${timeLeft}`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    alert('Time‚Äôs up! Moving to next letter.');
                    nextLevel();
                }
            }, 1000);
        }

        function loadItems() {
            const container = document.getElementById('game-container');
            const currentItems = document.querySelectorAll('.item');
            currentItems.forEach(item => container.removeChild(item));

            const data = itemsData[targetLetter];
            const allItems = [...data.correct, ...data.wrong];
            allItems.sort(() => Math.random() - 0.5); // Shuffle

            const isMobile = window.innerWidth <= 600;
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            const rows = isMobile ? Math.ceil(allItems.length / 2) : 1; // 2 columns on mobile, 1 row on desktop
            const itemWidth = isMobile ? 100 : 120;
            const itemHeight = isMobile ? 120 : 150;
            const startTop = 100; // Below title and granny
            const maxTop = containerHeight - 300; // Leave space for backpack and hint

            allItems.forEach((obj, index) => {
                const item = document.createElement('div');
                item.className = 'item';
                item.id = `item-${index}`;
                item.draggable = true;
                item.ondragstart = drag;
                item.innerHTML = `<span class="image">${obj.emoji}</span><span class="word">${obj.word}</span>`;
                item.dataset.letter = obj.word[0].toUpperCase();

                // Position calculation
                if (isMobile) {
                    // Stack in 2 columns
                    const col = index % 2;
                    const row = Math.floor(index / 2);
                    item.style.left = `${(containerWidth / 2) * col + (containerWidth / 4) - (itemWidth / 2)}px`;
                    item.style.top = `${startTop + row * (itemHeight + 20)}px`;
                } else {
                    // Horizontal row
                    item.style.left = `${(containerWidth / allItems.length) * index + (containerWidth / (allItems.length * 2)) - (itemWidth / 2)}px`;
                    item.style.top = `${startTop}px`;
                }

                container.appendChild(item);

                // Mobile touch
                item.addEventListener('touchstart', (ev) => {
                    ev.target.style.opacity = 0.5;
                    // Set absolute for dragging
                    const rect = ev.target.getBoundingClientRect();
                    ev.target.style.position = 'absolute';
                    ev.target.style.left = `${rect.left}px`;
                    ev.target.style.top = `${rect.top}px`;
                });
                item.addEventListener('touchmove', (ev) => {
                    let touch = ev.touches[0];
                    ev.target.style.left = `${touch.clientX - (itemWidth / 2)}px`;
                    ev.target.style.top = `${touch.clientY - (itemHeight / 2)}px`;
                });
                item.addEventListener('touchend', (ev) => {
                    ev.target.style.opacity = 1;
                    let backpack = document.getElementById('backpack');
                    let rect = backpack.getBoundingClientRect();
                    let x = ev.changedTouches[0].clientX;
                    let y = ev.changedTouches[0].clientY;
                    if (x > rect.left && x < rect.right && y > rect.top && y < rect.bottom) {
                        let fakeEv = { target: backpack, preventDefault: () => {}, dataTransfer: { getData: () => item.id } };
                        drop(fakeEv);
                    } 
                    // No reset position, stays where dropped if wrong
                });
            });
        }

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            let data = ev.dataTransfer.getData("text");
            let item = document.getElementById(data);
            if (item.dataset.letter === targetLetter) {
                item.style.display = 'none'; // Remove from view
                score++;
                document.getElementById('progress').innerText = `Packed: ${score}/3`;
                playDing();
                if (score >= 3) {
                    clearInterval(timerInterval);
                    alert(`Great job! Backpack packed for ${targetLetter}!`);
                    nextLevel();
                }
            } else {
                item.style.animation = 'bounce 0.5s';
                setTimeout(() => { item.style.animation = ''; }, 500);
                playBoing();
                let hintText = `Oops! That starts with '${item.dataset.letter}' not '${targetLetter}'!`;
                let hint = document.getElementById('hint');
                hint.innerText = hintText;
                hint.style.display = 'block';
                setTimeout(() => { hint.style.display = 'none'; }, 3000);
            }
        }

        function nextLevel() {
            currentLetterIndex++;
            if (currentLetterIndex >= letters.length) {
                alert('Congratulations! You packed the backpack for all letters A-Z!');
                currentLetterIndex = 0;
            }
            targetLetter = letters[currentLetterIndex];
            timeLeft = 60;
            score = 0;
            document.getElementById('progress').innerText = `Packed: 0/3`;
            startGame();
        }

        startGame(); // Auto-start
    </script>
</body>
</html>